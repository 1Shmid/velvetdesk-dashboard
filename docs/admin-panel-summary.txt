# ADMIN PANEL SUMMARY

## üìä OVERVIEW

Admin Panel - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VelvetDesk –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –¥–ª—è super_admin.
–î–æ—Å—Ç—É–ø: http://localhost:3000/admin-login (production: https://velvetdesk.ai/admin-login)

## üîê AUTHENTICATION

**Separate auth system –æ—Ç customer dashboard:**
- Login: /admin-login (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞)
- Auth: Cookie-based (admin_id cookie, –Ω–µ NextAuth)
- Logout: —É–¥–∞–ª—è–µ—Ç cookie, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /admin-login
- Middleware: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç admin_id cookie –¥–ª—è /admin/* routes

**Test credentials:**
- Email: admin@velvetdesk.ai
- Password: admin123

## üìÅ STRUCTURE
```
/admin-login          ‚Üí Admin login page (dark theme)
/admin                ‚Üí Dashboard (overview)
/admin/customers      ‚Üí All businesses list
/admin/customers/[id] ‚Üí Customer detail page
/admin/waitlist       ‚Üí Waitlist management (approve/reject)
/admin/revenue        ‚Üí MRR, ARR, breakdown
/admin/product-usage  ‚Üí Calls statistics
```

## üéØ FEATURES (Phase 1.5)

### 1. Dashboard (Home)
- MRR (Monthly Recurring Revenue)
- Active subscriptions count
- Total calls across platform
- Key metrics overview

### 2. Customers
**List view:**
- All businesses from `businesses` table
- Columns: Business, Email, Phone, Status, Created, Actions
- Status badges: active/pending_payment/past_due/suspended/cancelled
- "View" button ‚Üí customer detail page

**Detail view (/customers/[id]):**
- Business info (name, email, phone, VAPI ID)
- Total calls count
- Recent 10 calls table
- Back to list navigation

### 3. Waitlist
**Stats cards:**
- Pending Approval (status: email_verified)
- Approved (moved to onboarding)
- Rejected

**Table:**
- Columns: Business Name, Type, Contact, Phone, Email, Verified (icon), Created, Status, Actions
- Actions: Approve/Reject buttons (—Ç–æ–ª—å–∫–æ –¥–ª—è email_verified)
- –ü–æ—Å–ª–µ Approve: —Å—Ç–∞—Ç—É—Å ‚Üí "approved", –∏—Å—á–µ–∑–∞–µ—Ç –∏–∑ pending

**Approve flow:**
1. Admin clicks Approve
2. Status –≤ waitlist ‚Üí "approved"
3. TODO: —Å–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ businesses (status: pending_payment)
4. TODO: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å payment invite email (‚Ç¨50 LemonSqueezy link)

### 4. Revenue
**Stats:**
- MRR = active customers √ó ‚Ç¨350
- Total Revenue (Year 1) = setup fees + 12 months MRR
- Active Customers count

**Breakdown:**
- Setup Fees (‚Ç¨50 √ó customers)
- Monthly Recurring (‚Ç¨350 √ó customers)
- Annual Recurring Revenue (ARR)

### 5. Product Usage
**Stats:**
- Total Calls across platform
- Avg Call Duration
- Success Rate (completed / total)
- Active Businesses (with calls)

**Table: Calls by Customer**
- Business name
- Total calls
- Total duration (minutes)
- Avg duration per call
- Sorted by call count DESC

## üóÑÔ∏è DATABASE

**Tables used:**
- `users` (admin login: role = super_admin, business_id = NULL)
- `businesses` (all customers)
- `calls` (all calls, grouped by business_id)
- `waitlist` (applications: pending/email_verified/approved/rejected)

**RLS:** Admin bypasses RLS —á–µ—Ä–µ–∑ SERVICE_ROLE_KEY

## üîß TECH STACK

- Next.js 15 App Router (server components)
- Supabase (SERVICE_ROLE_KEY for admin queries)
- Cookie-based auth (admin_id)
- TailwindCSS + Lucide icons
- Dark sidebar theme (gray-900)

## üìù TODO (Phase 2.5)

- [ ] Approve ‚Üí auto-create business + send payment email
- [ ] MRR chart (monthly growth)
- [ ] Failed payments handling
- [ ] Usage monitoring (call minutes limits)
- [ ] "Login as customer" feature
- [ ] Email notification settings
- [ ] Invoice generation
- [ ] Export data to CSV

---

**Status:** Phase 1.5 Complete ‚úÖ  
**Last Update:** 21 –æ–∫—Ç—è–±—Ä—è 2025